{% extends 'base.html.twig' %}

{% block title %}
	{{ livre.titre }}
	- BookStore
{% endblock %}

{% block body %}
	<div class="bg-gray-100 min-h-screen py-8">
		<div
			class="container mx-auto px-4">
			<!-- Fil d'ariane -->
			<nav class="text-sm mb-6">
				<ol class="list-none p-0 inline-flex">
					<li class="flex items-center">
						<a href="{{ path('home') }}" class="text-indigo-600 hover:text-indigo-800">Accueil</a>
						<svg class="fill-current w-3 h-3 mx-3" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 320 512"><path d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"/></svg>
					</li>
					<li class="flex items-center">
						<a href="{{ path('app_boutique_livres') }}" class="text-indigo-600 hover:text-indigo-800">Livres</a>
						<svg class="fill-current w-3 h-3 mx-3" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 320 512"><path d="M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"/></svg>
					</li>
					<li>
						<span class="text-gray-500">{{ livre.titre }}</span>
					</li>
				</ol>
			</nav>

			<!-- Message flash (ajout au panier réussi) -->
			{% for message in app.flashes('success') %}
				<div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mb-6" role="alert">
					<span class="block sm:inline">{{ message }}</span>
					<button class="absolute top-0 bottom-0 right-0 px-4 py-3" type="button" onclick="this.parentElement.style.display='none'">
						<span class="sr-only">Fermer</span>
						<svg class="fill-current h-6 w-6 text-green-500" role="button" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 20 20">
							<title>Fermer</title><path d="M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2 1.2 0 1 1-1.697-1.697l2.758-3.15-2.759-3.152a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.651-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758 3.152 2.758 3.15a1.2 1.2 0 0 1 0 1.698z"/></svg>
					</button>
				</div>
			{% endfor %}

			<!-- Détail du livre -->
			<div class="bg-white rounded-xl shadow-lg overflow-hidden">
				<div
					class="md:flex">
					<!-- Image du livre -->
					<div class="md:w-1/3 lg:w-2/5">
						<div class="h-full w-full relative">
							<img src="{{ livre.image }}" alt="{{ livre.titre }}" class="w-full h-full object-cover md:min-h-[500px]">
							{% if livre.categorie %}
								<span class="absolute top-4 left-4 bg-indigo-600 text-white text-sm font-bold px-3 py-1 rounded-full shadow-md">
									{{ livre.categorie.libelle }}
								</span>
							{% endif %}
						</div>
					</div>
					<!-- Informations du livre -->
					<div class="md:w-2/3 lg:w-3/5 p-8">
						<div class="pb-6 border-b border-gray-200 mb-6">
							<h1 class="font-playfair text-3xl md:text-4xl font-bold text-gray-800 mb-2">
								{{ livre.titre }}
							</h1>
							<div class="flex items-center gap-3 text-sm text-gray-600 mb-4">
								<span class="flex items-center">
									<i class="fas fa-user-edit mr-2 text-indigo-500"></i>
									{{ livre.editeur }}
								</span>
								<span class="flex items-center">
									<i class="fas fa-calendar-alt mr-2 text-indigo-500"></i>
									{{ livre.dateEdition|date('d/m/Y') }}
								</span>
								<span class="flex items-center">
									<i class="fas fa-barcode mr-2 text-indigo-500"></i>
									ISBN:
									{{ livre.isbn }}
								</span>
							</div>
							<div class="bg-yellow-100 rounded-lg p-4 mb-6">
								<p class="text-xl font-bold text-indigo-900">
									{{ livre.prix }}
									DT
								</p>
							</div>
						</div>

						<!-- Formulaire d'ajout au panier -->
						<form action="{{ path('app_panier_ajouter', {id: livre.id}) }}" method="post" class="mb-8">
							<div class="flex flex-wrap items-center gap-4">
								<div class="max-w-xs">
									<label for="quantite" class="block text-sm font-medium text-gray-700 mb-1">Quantité</label>
									<div class="flex rounded-md shadow-sm">
										<button type="button" onclick="decrementQuantity()" class="px-4 py-2 bg-gray-200 text-gray-700 border border-gray-300 rounded-l-md hover:bg-gray-300">
											<i class="fas fa-minus"></i>
										</button>
										<input type="number" id="quantite" name="quantite" value="1" min="1" class="block w-16 text-center border-gray-300 focus:ring-indigo-500 focus:border-indigo-500">
										<button type="button" onclick="incrementQuantity()" class="px-4 py-2 bg-gray-200 text-gray-700 border border-gray-300 rounded-r-md hover:bg-gray-300">
											<i class="fas fa-plus"></i>
										</button>
									</div>
								</div>
								<button type="submit" class="flex-grow md:flex-grow-0 py-3 px-8 bg-indigo-600 hover:bg-indigo-700 text-white font-medium rounded-md shadow-md transition-colors">
									<i class="fas fa-shopping-cart mr-2"></i>
									Ajouter au panier
								</button>
								<a href="{{ path('app_boutique_livres') }}" class="py-3 px-8 border border-gray-300 hover:bg-gray-50 text-gray-700 font-medium rounded-md transition-colors">
									<i class="fas fa-arrow-left mr-2"></i>
									Retour
								</a>
							</div>
						</form>

						<!-- Description -->
						<div class="mb-6">
							<h2 class="text-xl font-bold text-gray-800 mb-3">Description</h2>
							<div class="prose max-w-none text-gray-600">
								{{ livre.resume|nl2br }}
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	{% block javascripts %}
		<script>
			function decrementQuantity() {
var input = document.getElementById('quantite');
var value = parseInt(input.value, 10);
if (value > 1) {
input.value = value - 1;
}
}

function incrementQuantity() {
var input = document.getElementById('quantite');
input.value = parseInt(input.value, 10) + 1;
}
		</script>
	{% endblock %}

{% endblock %}
